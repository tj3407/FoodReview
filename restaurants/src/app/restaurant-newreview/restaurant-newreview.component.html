<section>
  <h3>Write a review for {{ restaurant?.name }}</h3>
  <div class='container'>
    {{ errorMessage }}
    <fieldset>
      <form (submit)="reviewForm.valid && onSubmit($event, reviewForm)" #reviewForm='ngForm'>
        <div class="form-group row">
          <label class="control-label col-sm-2">Your name</label>
          <div class="col-sm-6">
            <input type="text"
              class="form-control"
              name="newReview.name"
              required
              [(ngModel)]='newReview.name'
              #name="ngModel">
          </div>
        </div>
        <div class="purple" *ngIf='(name.touched) && name.errors'>
          <div class="purple" *ngIf='name.errors.required'>
            You must provide your name
          </div>
        </div>

        <div class="form-group row">
          <label class="control-label col-sm-2">Stars</label>
          <div class="col-sm-6">
            <select class="form-control" name="newReview.star" required min=1 max=5 [(ngModel)]='newReview.star' #star="ngModel">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
        <div class="purple" *ngIf='(star.touched) && star.errors'>
          <div class="purple" *ngIf='star.errors.required'>
            You must select a rating between 1-5
          </div>
        </div>

        <div class="form-group row">
          <label class="control-label col-sm-2">Your review</label>
          <div class="col-sm-6">
            <textarea class="form-control" name="newReview.message" [(ngModel)]='newReview.message'
              required #message="ngModel" rows="4" cols="50"></textarea>
          </div>
        </div>
        <div class="purple" *ngIf='(message.touched) && message.errors'>
          <div class="purple" *ngIf='message.errors.required'>
            You must provide a review
          </div>
        </div>

        <div class="form-group row">
          <label class="control-label col-sm-2"></label>
          <div class="col-sm-6">
            <button class='btn btn-success' [disabled]='!reviewForm.valid'>Submit</button>
            <button class='btn btn-danger' (click)='onCancel($event)'>Cancel</button>
          </div>
        </div>
      </form>
    </fieldset>
  </div>
</section>
